# Example optimization configuration using MultiDeviceScanEvaluator
vocs:
  variables:
    S1H:Current: [-0.5, 0.5]   # control
    U_EMQTripletBipolar:Current_Limit.Ch1: [ .5, 2 ]
  objectives:
    f: MINIMIZE                # filled post-update with VO
  constraints: {}
  constants: {}
  observables:
    - x_cen

# Evaluator: Specify the evaluator class and configuration
evaluator:
  # Module path to your custom evaluator
  # (Create a subclass of MultiDeviceScanEvaluator)
  module: geecs_scanner.optimization.evaluators.beam_position_evaluator
  class: BeamPositionEvaluator

  kwargs:
    # Custom evaluator parameters
    calibration: 24.4e-3  # Spatial calibration in mm/pixel

    # Analyzer configurations (list of SingleDeviceScanAnalyzerConfig)
    analyzers:
      # Single device example: UC_ALineEBeam3 camera
      - device_name: UC_ALineEBeam3
        analyzer_type: Array2DScanAnalyzer  # or Array1DScanAnalyzer
        file_tail: .png  # File extension for data files

        # ImageAnalyzer configuration
        image_analyzer:
          module: image_analysis.offline_analyzers.beam_analyzer
          class: BeamAnalyzer
          kwargs: {"camera_config_name":"UC_ALineEBeam3"}

        # Analysis mode (per_bin recommended for optimization)
        analysis_mode: per_bin

generator:
  name: multipoint_bax_alignment

xopt_config_overrides:
  multipoint_bax_alignment:
    control_names: ["S1H:Current"]
    measurement_name: "U_EMQTripletBipolar:Current_Limit.Ch1"
    observable_name: "x_CoM"
    probe_nominal: 1.20
    probe_grid_absolute: [-0.20, 0.0, +0.20]
    n_control_mesh: 41
    n_monte_carlo_samples: 128
    use_low_noise_prior: false
